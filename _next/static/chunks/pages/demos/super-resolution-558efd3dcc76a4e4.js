(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{8106:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/demos/super-resolution",function(){return t(767)}])},767:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return o}});var i=t(5893),n=t(5817),r=t(9008),a=t.n(r),l=t(7294),c=t(4540);function o(){let e=(0,l.useRef)(null),s=(0,l.useRef)(null),t=(0,l.useRef)(null),r=(0,l.useRef)(null),o=(0,l.useRef)(null),[d,h]=(0,l.useState)({width:0,height:0,aspectRatio:1}),u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(s.current){let t=s.current.offsetWidth-11;h({width:t=t>800?800:t,height:t*e,aspectRatio:e})}};(0,l.useEffect)(()=>{u(),x()},[]);let[m,f]=(0,l.useState)({}),[g,p]=(0,l.useState)({message:"ready",processing:!1}),x=async()=>{p({message:"loading the model",processing:!0});let e=await c.V6.create("superres-small-quant");f({instance:e.model}),p({message:"ready",processing:!1})},j=()=>{if(o.current&&o.current.files&&o.current.files[0]){e.current.src=URL.createObjectURL(o.current.files[0]);var s=new FileReader;s.onload=async()=>{w(s.result)},s.readAsArrayBuffer(o.current.files[0])}},w=async e=>{p({message:"processing the image",processing:!0});var s=await n.Z.read(e);u(s.bitmap.height/s.bitmap.width);let i=await m.instance.process(e,800),r=v(i.data);t.current.src=r,p({message:"processing finished",processing:!1})},v=e=>{let s=document.createElement("canvas");s.width=e.width,s.height=e.height;let t=s.getContext("2d");return t.putImageData(e,0,0),s.toDataURL("image/png")};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a(),{children:[(0,i.jsx)("title",{children:"Web AI Next.js super-resolution example"}),(0,i.jsx)("meta",{name:"description",content:"Web AI Next.js super-resolution example"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,i.jsx)("main",{children:(0,i.jsxs)("div",{className:"container",children:[(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col",children:(0,i.jsx)("h2",{children:"Image super-resolution"})})}),(0,i.jsx)("div",{className:"row mb-2",children:(0,i.jsx)("div",{className:"col",children:(0,i.jsx)("div",{className:"d-flex align-items-center",children:(0,i.jsxs)("strong",{children:["Status: ",g.message]})})})}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-6 col-sm-12 mb-2",children:(0,i.jsx)("div",{ref:s,style:{position:"relative",height:d.height},children:(0,i.jsx)("img",{alt:"",ref:e,width:d.width,height:d.height,style:{position:"absolute",top:0,left:0}})})}),(0,i.jsx)("div",{className:"col-md-6 col-sm-12 mb-2",children:(0,i.jsx)("div",{ref:r,style:{position:"relative",height:d.height},children:(0,i.jsx)("img",{alt:"",ref:t,width:d.width,height:d.height,style:{position:"absolute",top:0,left:0}})})})]}),(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-6 col-sm-12 mb-2",children:(0,i.jsxs)("form",{action:"#",onSubmit:e=>e.preventDefault(),children:[(0,i.jsx)("h6",{children:"Select the image"}),(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsx)("input",{className:"form-control",type:"file",ref:o,onChange:j,disabled:g.processing})})})]})})})]})})]})}},2987:function(){},8104:function(){},3731:function(){}},function(e){e.O(0,[770,655,362,444,774,888,179],function(){return e(e.s=8106)}),_N_E=e.O()}]);